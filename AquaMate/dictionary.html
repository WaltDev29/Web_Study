<!DOCTYPE html>
<html lang="kr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Aqua Mate : Dictionary</title>
	<link rel="stylesheet" href="css/dictionary.css">
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script>
		$(document).ready(function () {
			// 물고기 데이터 불러오기.
			const params = new URLSearchParams(window.location.search);

			fetch("data/data_fish.json")
				.then(response => response.json())
				.then(data => {
					const fishKeys = Object.keys(data);

					for (let i = 0; i < 5; i++) {
						fishKeys.forEach(fishKey => {
							let a = $("<a>", { href: `fish_info.html?fish=${fishKey}` })
							let art = $("<article>");
							let head = $("<div>", { id: "art_head" });
							let name = $("<h3>").text(data[fishKey].name);
							let star = $("<div>", { class: "starBox" });
							let img = $("<img>", { src: data[fishKey].img });

							$("#item_container").append(a);
							a.append(art);
							art.append(head);
							head.append(name);
							head.append(star);
							art.append(img);

							if (data[fishKey].name.length >= 5) name.css("font-size", "16px");
						});
					}
				})
				.catch(error => {
					console.error("JSON 불러오기 실패 : ", error);
					alert("물고기 정보를 불러오는 데 실패했습니다.");
				})

			// 즐겨찾기 버튼 클릭 이벤트
			$(document).on("click", ".starBox", function (e) {
				e.stopPropagation();
				e.preventDefault();
				if ($(this).css("background-image").includes("Star.png"))
					$(this).css("background-image", "url(images/star_yellow.png)");
				else $(this).css("background-image", "url(images/Star.png)");
			});

			// 이름 검색 이벤트
			$("#btn_search").click(searchName)
			$("#tb_search").keydown(function (e) {
				if (e.key == "Enter") searchName();
			})
			// 이름 검색 함수
			function searchName() {
				let value = $("#tb_search").val().trim();
				$("article h3").each(function () {
					$(this).closest("article").css("display", "flex");
					if (!$(this).text().includes(value)) $(this).closest("article").css("display", "none");
				})
			}
		})
	</script>
</head>

<body>
	<header>
		<a href="userHome.html">
			<img src="images/logo.png" width="200px">
		</a>
		<div id="head">
			<a href="dictionary.html">
				<button id="btn_dic"><img src="images/book.png"></button>
				<h1>Dictionary</h1>
			</a>
		</div>
		<nav>
			<div id="dic">
				<a href="dictionary.html">
					<button id="btn_dic"><img src="images/book.png"></button>
					<h3>Dictionary</h3>
				</a>
			</div>
			<div id="match">
				<a href="match.html">
					<button id="btn_match"><img src="images/heart.png"></button>
					<h3>Match</h3>
				</a>
			</div>
			<div id="about">
				<a href="about.html">
					<button id="btn_about"><img src="images/bookmark.png"></button>
					<h3>About</h3>
				</a>
			</div>
		</nav>
	</header>
	<main>
		<div id="gradient_top">
		</div>
		<section>
			<div id="search">
				<button id="btn_filter">Filter<img src="images/filter.png"></button>
				<input type="text" id="tb_search">
				<button id="btn_search">Search</button>
			</div>
			<nav>
				<h3><a href="">바다</a></h3>
				<h3><a href="">민물</a></h3>
				<h3><a href="">수온</a></h3>
				<h3><a href="">크기</a></h3>
				<h3><a href="">성격</a></h3>
			</nav>
			<div id="item_container"></div>
		</section>
		<div id="gradient_bottom">
		</div>
	</main>
	<footer>
		<div id="contact">
			<span id="contact_label">Contact</span>
			<span class="label"><img src="images/github.png" id="img_github"><a
					href="https://github.com/WaltDev29">WaltDev29</a></span>
			<span class="label"><img src="images/email.png" id="img_email">waltdev29@gmail.com</span>
		</div>
		<div id="source">
			<span id="source_label">source</span>
			<span class="label"><a
					href="https://ko.wikipedia.org/wiki/%EC%9C%84%ED%82%A4%EB%B0%B1%EA%B3%BC:%EB%8C%80%EB%AC%B8">Wikipedia</a></span>
		</div>
	</footer>
</body>

</html>